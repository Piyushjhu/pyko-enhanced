# ==============================================================================
# pyKO Test 18b: Multi-Thickness Analysis Configuration
# ==============================================================================
#
# This file defines a thickness sweep analysis with the following setup:
# - Test Name: Test 18b Aluminum-Aluminum Multithickness
# - Impactor: Aluminum flyer
# - Target: Aluminum target
# - Physics: Thickness sweep analysis with constant impact velocity
#
# ==============================================================================
# SIMULATION PARAMETERS
# ==============================================================================

name: Test 18b Aluminum-Aluminum Multithickness  # Test name for identification
outputfilename: ./pyko-test-18b-aluminum-aluminum-multithickness-bin.dat  # Binary output file path
outputformat: BIN  # Output format (BIN = binary)

# ==============================================================================
# THICKNESS SWEEP PARAMETERS
# ==============================================================================
# These parameters define the range of target thicknesses to simulate
# The script will automatically run simulations for each thickness in the range
thickness_sweep:
  constant_velocity: 100.0  # Constant impact velocity (m/s)
  min_thickness: 200.0  # Minimum target thickness (μm)
  max_thickness: 600.0  # Maximum target thickness (μm)
  thickness_steps: 3  # Number of thickness steps to simulate

# ==============================================================================
# TIMING PARAMETERS
# ==============================================================================
# These control the simulation duration and output frequency
tstop: 1.0e-07  # Total simulation time (seconds) - when simulation ends
dtstart: 1.0e-10  # Initial time step (seconds) - starting time step size
dtoutput: 1.0e-10  # Output frequency (seconds) - how often to save data
# Note: Timing should be sufficient for the thickest target


# ==============================================================================
# MATERIAL 1: IMPACTOR (FLYER)
# ==============================================================================
# This is the material that impacts the target
mat1:
  # Mesh definition - controls spatial discretization
  mesh:
    cells: 100  # Number of computational cells
    xstart: -0.0001  # Starting x-position (meters)
    length: 0.0001  # Material thickness (meters)

  # Initial conditions - state at t=0
  init:
    up0: 100.0  # Initial velocity (m/s) - constant for all thicknesses
    rho0: 2700.0  # Initial density (kg/m³)
    p0: 0.0  # Initial pressure (Pa)
    e0: 0.0  # Initial internal energy (J/kg)
    t0: 298.0  # Initial temperature (K)

  # Equation of State (EOS) - defines pressure-density-energy relationship
  eos:
    name: Aluminum flyer  # Material name for identification
    type: MGR  # EOS type (MGR = Mie-Gruneisen)
    rhoref: 2700.0  # Reference density (kg/m³)
    c0: 5200.0  # Bulk sound speed (m/s)
    s1: 1.5  # Hugoniot slope parameter (dimensionless)
    gamma0: 2.0  # Gruneisen parameter (dimensionless)
    cv: 896.0  # Specific heat capacity (J/kg/K)

  # Strength model - defines material strength and plasticity
  str:
    type: SG  # Strength model (HYDRO/VM/SG)
    Y0: 290000000.0  # Initial yield strength (Pa)
    Ymax: 680000000.0  # Maximum yield strength (Pa)
    beta: 125.0  # Strain rate sensitivity parameter
    n: 0.1  # Strain hardening exponent
    b: 8.0  # Strain rate parameter
    h: 0.00062  # Strain hardening parameter
    Tm0: 1220.0  # Melting temperature (K)
    mu0: 27600000000.0  # Initial shear modulus (Pa)

  # Fracture model - defines spall (tensile fracture) behavior
  frac:
    pfrac: 276000000.0  # Fracture pressure (Pa) - tensile stress threshold for spall
    nrhomin: 1.0  # Minimum density ratio - controls void formation during spall

# ==============================================================================
# MATERIAL 2: TARGET
# ==============================================================================
# This is the material that receives the impact (thickness will be varied)
mat2:
  # Mesh definition - controls spatial discretization
  mesh:
    cells: 200  # Number of computational cells (will be varied)
    xstart: 0.0  # Starting x-position (meters)
    length: 0.0002  # Material thickness (meters) (will be varied)

  # Initial conditions - state at t=0
  init:
    up0: 0.0  # Initial velocity (m/s) - target is stationary
    rho0: 2700.0  # Initial density (kg/m³)
    p0: 0.0  # Initial pressure (Pa)
    e0: 0.0  # Initial internal energy (J/kg)
    t0: 298.0  # Initial temperature (K)

  # Equation of State (EOS) - defines pressure-density-energy relationship
  eos:
    name: Aluminum target  # Material name for identification
    type: MGR  # EOS type (MGR = Mie-Gruneisen)
    rhoref: 2700.0  # Reference density (kg/m³)
    c0: 5200.0  # Bulk sound speed (m/s)
    s1: 1.5  # Hugoniot slope parameter (dimensionless)
    gamma0: 2.0  # Gruneisen parameter (dimensionless)
    cv: 896.0  # Specific heat capacity (J/kg/K)

  # Strength model - defines material strength and plasticity
  str:
    type: SG  # Strength model (HYDRO/VM/SG)
    Y0: 290000000.0  # Initial yield strength (Pa)
    Ymax: 680000000.0  # Maximum yield strength (Pa)
    beta: 125.0  # Strain rate sensitivity parameter
    n: 0.1  # Strain hardening exponent
    b: 8.0  # Strain rate parameter
    h: 0.00062  # Strain hardening parameter
    Tm0: 1220.0  # Melting temperature (K)
    mu0: 27600000000.0  # Initial shear modulus (Pa)

  # Fracture model - defines spall (tensile fracture) behavior
  frac:
    pfrac: 276000000.0  # Fracture pressure (Pa) - tensile stress threshold for spall
    nrhomin: 1.0  # Minimum density ratio - controls void formation during spall

# ==============================================================================
# BOUNDARY CONDITIONS
# ==============================================================================
# These define how the simulation domain behaves at its edges
boundaries:
  ibc: FREE  # Left boundary condition (FREE = free surface)
  ip0: 0.0  # Left boundary pressure (Pa)
  obc: FREE  # Right boundary condition (FREE = free surface)
  op0: 0.0  # Right boundary pressure (Pa)

# ==============================================================================
# GEOMETRY AND PHYSICS PARAMETERS
# ==============================================================================
geometry: PLA  # Geometry type (PLA = planar)
gravity: 0.0  # Gravitational acceleration (m/s²)
pvoid: 0.0  # Void pressure (Pa)

# ==============================================================================
# UNITS DEFINITION
# ==============================================================================
# User input parameters units - what units you specify values in
# PyKO will automatically convert these to code units internally
units:
  time: second  # Time units for tstop, dtstart, dtoutput
  length: meter  # Length units for mesh dimensions
  velocity: meter/second  # Velocity units for up0
  density: kg/m^3  # Density units for rho0, rhoref
  mass: kg  # Mass units
  pressure: Pa  # Pressure units for p0, pfrac, gmod, ys
  temperature: K  # Temperature units for t0
  energy: J  # Energy units
  sp_energy: J/kg  # Specific energy units for e0
  sp_entropy: J/kg/K  # Specific entropy units
  sp_heat_cap: J/kg/K  # Specific heat capacity units for cv
  gravity: m/s^2  # Gravitational acceleration units
  s2: second/meter  # Hugoniot parameter units

# EOS table units - for ANEOS tables (not used in this MGR configuration)
tableunits:
  density: g/cm^3  # Density units in EOS tables
  temperature: K  # Temperature units in EOS tables
  pressure: GPa  # Pressure units in EOS tables
  sp_energy: MJ/kg  # Specific energy units in EOS tables
  hfree_energy: MJ/kg  # Helmholtz free energy units
  sp_entropy: MJ/K/kg  # Specific entropy units in EOS tables
  sound_speed: cm/s  # Sound speed units in EOS tables
  sp_heat_cap: MJ/kg/K  # Specific heat capacity units in EOS tables

# Code units - internal units used by PyKO (Wilkins book units)
# These are automatically converted from user units
codeunits:
  time: microseconds  # Internal time units
  length: cm  # Internal length units
  mass: g  # Internal mass units
  density: g/cm^3  # Internal density units
  relative_volume: dimensionless  # Volume ratio units
  velocity: cm/microsecond  # Internal velocity units (10 km/s)
  pressure: megabar  # Internal pressure units (100 GPa)
  temperature: K  # Internal temperature units
  energy: eu  # Internal energy units (10^12 ergs)
  sp_energy: eu/g  # Internal specific energy units
  sp_heat_cap: eu/K/g  # Internal specific heat capacity units
  sp_entropy: eu/K/g  # Internal specific entropy units
  ie_perv0: eu/cm^3  # Internal energy per volume units
  cv_perv0: eu/cm^3/K  # Internal heat capacity per volume units
  gravity: cm/microseconds^2  # Internal gravitational acceleration units
  s2: microseconds/cm  # Internal Hugoniot parameter units

# ==============================================================================
# SIMULATION CONTROL
# ==============================================================================
nmat: 2  # Number of materials in simulation